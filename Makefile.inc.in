# Makefile include file
# $Id$

#--------------------------------------------------------------------------
# user editable section

prefix  	= @prefix@
exec_prefix	= @exec_prefix@
bindir		= @bindir@
libdir		= @libdir@
incdir		= @includedir@
mandir		= @mandir@


ifeq "$(V)" "1"
QP = @\#
QR =
else
QP = @
QR = @
endif


# Executables

CC		= @CC@
CFLAGS		= @CFLAGS@
CC_FLG		= $(CFLAGS) -I$(topdir)/src -I$(reldir)/src

LD              = @CC@
LDFLAGS		= @LDFLAGS@
LD_FLG          = $(LDFLAGS)

AR		= @AR@
AR_FLG		= -rs

LN_S		= @LN_S@
LN_S_FLG	= -f

INSTALL		= @INSTALL@
INSTALL_FLG	=

@SET_MAKE@
MAKE_FLG	=


# end of user editable section
#--------------------------------------------------------------------------

MPEGDEMUX_VERSION_MAJ := @MPEGDEMUX_VERSION_MAJ@
MPEGDEMUX_VERSION_MIN := @MPEGDEMUX_VERSION_MIN@
MPEGDEMUX_VERSION_MIC := @MPEGDEMUX_VERSION_MIC@
MPEGDEMUX_VERSION_STR := @MPEGDEMUX_VERSION_STR@
MPEGDEMUX_VERSION_REL := @MPEGDEMUX_VERSION_REL@

MPEGDEMUX_CFG_TIME := @MPEGDEMUX_CFG_TIME@
MPEGDEMUX_CFG_DATE := @MPEGDEMUX_CFG_DATE@


VPATH = $(srcdir)


ifneq "$(dstdir)" "$(topdir)"
CC_FLG	+= -I$(topdir)/src
endif


all: subdirs


subdirs: subdirs-rec
subdirs-rec:
ifneq "$(subdir)" ""
	@for dir in $(subdir); do \
		(cd $$dir && $(MAKE) $(MAKE_FLG)); \
	done
endif


clean: clean-rec
clean-rec:
ifneq "$(subdir)" ""
	@for dir in $(subdir); do \
		(cd $$dir && $(MAKE) $(MAKE_FLG) clean); \
	done
endif


install: install-rec
install-rec:
ifneq "$(subdir)" ""
	@for dir in $(subdir); do \
		(cd $$dir && $(MAKE) $(MAKE_FLG) install); \
	done
endif


%.o: %.c
	$(QP)echo "  CC     $@"
	$(QR)$(CC) -c $(CC_FLG) -o $@ $<
