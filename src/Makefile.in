# src/Makefile

srcdir := @srcdir@
topdir := @top_srcdir@
subdir :=
reldir := ..


SRC	:= buffer.c message.c mpegdemux.c mpeg_demux.c mpeg_list.c \
	mpeg_parse.c mpeg_remux.c mpeg_scan.c

OBJ	:= buffer.o message.o mpegdemux.o mpeg_demux.o mpeg_list.o \
	mpeg_parse.o mpeg_remux.o mpeg_scan.o

OBJ_EXT	:=

HDR	:= buffer.h message.h mpegdemux.h mpeg_demux.h mpeg_list.h \
	mpeg_parse.h mpeg_remux.h mpeg_scan.h

HDR_EXT	:=

MAN	:= mpegdemux.1

BIN	:= mpegdemux

SDP	:= Makefile $(HDR) $(HDR_EXT) config.h
BDP	:= Makefile $(OBJ) $(OBJ_EXT)

DIST	:= $(SRC) $(HDR) $(MAN) Makefile.in config.h.in


include $(reldir)/Makefile.inc


all: $(BIN)


mpegdemux: $(BDP)
	$(QP)echo "  LD     $@"
	$(QR)$(LD) $(LD_FLG) $(OBJ) $(OBJ_EXT) -o $@


clean:
	rm -f $(OBJ) $(BIN)


install:
	$(INSTALL) -d -m 755 $(bindir)
	$(INSTALL_PROGRAM) -m 755 $(BIN) $(bindir)
	$(INSTALL) -d -m 755 $(mandir)/man1
	$(INSTALL) -m 644 $(srcdir)/mpegdemux.1 $(mandir)/man1


buffer.o:	buffer.c $(SDP)
message.o:	message.c $(SDP)
mpegdemux.o:	mpegdemux.c $(SDP)
mpeg_demux.o:	mpeg_demux.c $(SDP)
mpeg_list.o:	mpeg_list.c $(SDP)
mpeg_parse.o:	mpeg_parse.c $(SDP)
mpeg_remux.o:	mpeg_remux.c $(SDP)
mpeg_scan.o:	mpeg_scan.c $(SDP)
